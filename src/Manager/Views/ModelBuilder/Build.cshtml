@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@model Manager.Models.TableColumnsViewModel
@{

}

<html>
<head>
    <title></title>
    <style type="text/css">
        body {
            word-break: break-word;
            line-height: 1.8;
        }

        .my_code {
            display: block;
            background-color: #f5f5f5;
            font-family: Courier New !important;
            font-size: 12px !important;
            border: 1px solid #ccc;
            padding: 5px;
            overflow: auto;
            margin: 5px 0;
            color: #000;
        }

        pre {
            margin-top: 0;
            margin-bottom: 0;
            font-family: Courier New !important;
            font-size: 12px !important;
            word-wrap: break-word;
            white-space: pre-wrap;
            /* vertical-align: middle;
                text-align: center; */
        }
    </style>
</head>
<body>
    <div id="divCode">
        @if (null != Model && null != Model.Columns && Model.Columns.Count > 0)
        {
        <div class="my_code">
            <input type="button" class="btn btn-primary" value="显示代码" onclick="ShowCode();" />
            <input type="button" class="btn btn-primary" value="选中代码" onclick="Copy(this);" />
            <textarea id="ttCode" class="form-control" rows="@(Model.Columns.Count * 6)" style="display:none;" readonly></textarea>
            <pre id="code">
            using System;
            using System.Collections.Generic;
            using System.Text;

            namespace @Model.DbConnectStringInfo.DatabaseName
            {
                public class @Common.StringHelper.FirstCharUpper(Model.DbConnectStringInfo.TableName)
                {
                    @{ String strPropertyCodeTemplate = Manager.BllProcessor.TemplateProcessor.GetPropertyTemplateFileContent(); }
                    @foreach (var tmp in Model.Columns)
                    {  
                        @(strPropertyCodeTemplate.Replace("$description$", tmp.Description)
                            .Replace("$datatype$", Common.DatabaseTypeHelper.ConvertToString(tmp.DataType))
                            .Replace("$propertyname$", Common.StringHelper.FirstCharUpper(tmp.Name)))
                    }
                }
            }
            
        </pre>
        </div>
        }
    </div>
    <script type="text/javascript">
        function Copy(dom) {
            $("#code").hide();
            $("#ttCode").show();
            var ttCodeVal = $("#ttCode").val();
            if (!ttCodeVal) {
                var code = $("#code").html();
                ttCodeVal = code.replace(/<span>/g, "").replace(/<\/span>/g, "").replace(/&lt;/g, "<").replace(/&gt;/g, ">");
                $("#ttCode").val(ttCodeVal);
            }
            var url = $(dom).prev();
            url.select();
            document.execCommand("Copy");
        }
        //显示代码
        function ShowCode() {
            $("#code").show();
            $("#ttCode").hide();
        }
    </script>
</body>

</html>